import{r as l,l as P,b as i,a,j as t}from"./index.f58de973.js";import{A as N}from"./AccountantSidebar.254c17ef.js";import"./react-confirm-alert.a960cfb7.js";import{S as R}from"./SearchInput.fbf5bece.js";import{O as S,a as O}from"./OptionsTh.c75c39d4.js";import{T as v,a as I,b as s,c as j,d as n}from"./Thead.153a86c7.js";import{I as k}from"./IndexNo.9a14fcf3.js";import{V as A}from"./ViewButton.a73d82a6.js";import{R as $}from"./index.esm.9fff59ce.js";import{R as D}from"./ReactPagination.cf11bdc7.js";import"./index.esm.9dc20768.js";import"./Forbidden.62eadd33.js";function E(){const[h,c]=l.exports.useState([]),[u,g]=l.exports.useState(1),{user:d}=l.exports.useContext(P);l.exports.useEffect(()=>{i.get("/prescription").then(e=>{c(e.data)})},[]);const y=e=>{i.get(`/prescription?q=${e}`).then(m=>{c(m.data),g(1)})},o=10,x=u*o,T=x-o,w=h.slice(T,x),C=Math.ceil(h.length/o);return a("div",{className:"p-8 bg-gray-100",children:[a("div",{className:"flex justify-between items-center",children:[t(R,{onSearch:y}),t(D,{pageCount:C,handlePageClick:e=>{g(e.selected+1)}})]}),a(v,{children:[a(I,{children:[t(k,{children:"#"}),t(s,{children:"Reg. Id"}),t(s,{children:"Patient"}),t(s,{children:"Date"}),t(s,{children:"Doctor"}),t(s,{children:"Amount(Rs.)"}),t(s,{children:"Payment Status"}),(d==null?void 0:d.role)!=="admin"&&t(S,{children:"Options"})]}),w.map((e,m)=>{var f,r,b;return a(j,{children:[t(n,{children:m+1*(u*o-9)}),t(n,{className:"font-bold",children:(f=e==null?void 0:e.patients[0])==null?void 0:f.registrationId}),t(n,{children:(r=e==null?void 0:e.patients[0])==null?void 0:r.name}),t(n,{children:e==null?void 0:e.paymentdate}),t(n,{children:(b=e==null?void 0:e.doctor[0])==null?void 0:b.name}),t(n,{children:a("span",{className:"font-bold",children:["Rs.",e==null?void 0:e.drugamount]})}),t(n,{children:e.paymentstatus==="Paid"?t("p",{className:"font-bold text-base bg-green-700 text-center px-2 rounded w-24 text-white",children:e==null?void 0:e.paymentstatus}):t("p",{className:"font-bold text-base bg-red-700 text-center px-2 rounded w-24 text-white",children:"Unpaid"})}),(d==null?void 0:d.role)!=="admin"&&t(O,{children:a(A,{style:"bg-green-800 hover:bg-green-600",viewFunction:`/accountant/invoice?edit=${e==null?void 0:e._id}`,children:[t($,{}),"Take Payment"]})})]},m)})]})]})}function Q(){return l.exports.useContext(P),t(N,{children:t(E,{})})}export{Q as default};
