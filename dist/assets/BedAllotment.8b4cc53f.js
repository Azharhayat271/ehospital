import{r as a,l as M,b as h,j as t,a as i,f}from"./index.f58de973.js";import{D as w}from"./DeleteButton.4f77d945.js";import{E as U}from"./EditButton.73344e14.js";import{B as k}from"./Button.401e0b30.js";import{I as m}from"./Input.2b19439f.js";import{S as q}from"./SearchInput.fbf5bece.js";import{S as x}from"./Select.20c0844e.js";import{h as z}from"./react-confirm-alert.a960cfb7.js";import{O as G,a as H}from"./OptionsTh.c75c39d4.js";import{T as J,a as K,b as c,c as Q,d as s}from"./Thead.153a86c7.js";import{F as V}from"./FormLayout.d72bc2a5.js";import{T as W}from"./Tabs.d7c11583.js";import{I as X}from"./IndexNo.9a14fcf3.js";import{T as Y}from"./TotalNo.b321ab04.js";import{R as Z}from"./index.esm.9fff59ce.js";import{R as b}from"./ReactPagination.cf11bdc7.js";import{B as ee}from"./ButtonPreloader.94c40e61.js";function ye({role:C}){const{user:u}=a.exports.useContext(M),[A,N]=a.exports.useState([]),[d,y]=a.exports.useState([]),[v,S]=a.exports.useState(1),[O,I]=a.exports.useState([]),[E,l]=a.exports.useState(!1),[r,R]=a.exports.useState({staffname:`${u==null?void 0:u.name}`,patientid:"",patientstatus:"",bedtype:"",bednumber:"",allotmentdate:"",dischargedate:""});function o(e){R(n=>({...n,[e.target.name]:e.target.value}))}function g(){h.get("/bedallotment").then(e=>{y(e.data)}).catch(e=>{f.error(e.data)})}const F=e=>{e.preventDefault(),l(!0),h.post("/bedallotment",{patientid:r==null?void 0:r.patientid,patientstatus:r==null?void 0:r.patientstatus,bedtype:r==null?void 0:r.bedtype,bednumber:r==null?void 0:r.bednumber,allotmentdate:r==null?void 0:r.allotmentdate,dischargedate:r==null?void 0:r.dischargedate,staffname:r==null?void 0:r.staffname}).then(n=>{l(!1),g(),f.success(n.data)}).catch(n=>{l(!1),f.error(n.response.data)})};a.exports.useEffect(()=>{h.get("/patient").then(e=>{N(e.data)}),h.get("/bed").then(e=>{I(e.data)}),g()},[]);const L=e=>{h.get(`/bedallotment?q=${e}`).then(n=>{y(n.data),S(1)})},p=10,B=v*p,j=B-p,D=d.slice(j,B),_=Math.ceil(d.length/p),$=e=>{S(e.selected+1)};return t(W,{label1:"Bed Allotment",label2:"Add Bed Allotment",content1:i("div",{children:[i("div",{className:"flex justify-between items-center",children:[t(q,{onSearch:L}),i("div",{className:"items-center flex flex-col lg:flex-row",children:[t(Y,{totalnumber:d==null?void 0:d.length}),t(b,{pageCount:_,handlePageClick:$})]})]}),i(J,{children:[i(K,{children:[t(X,{children:"#"}),t(c,{children:"Reg. Id"}),t(c,{children:"Patient"}),t(c,{children:"Bed Type"}),t(c,{children:"Bed Number"}),t(c,{children:"Patient Status"}),t(c,{children:"Staff"}),t(c,{children:"Allotment Date"}),t(c,{children:"Discharge Date"}),t(G,{children:"Options"})]}),D.map((e,n)=>{var T,P;return i(Q,{children:[t(s,{children:n+1*(v*p-9)}),t(s,{className:"font-bold",children:(T=e==null?void 0:e.patients[0])==null?void 0:T.registrationId}),t(s,{children:(P=e==null?void 0:e.patients[0])==null?void 0:P.name}),t(s,{children:e==null?void 0:e.bedtype}),t(s,{children:e==null?void 0:e.bednumber}),t(s,{children:e==null?void 0:e.patientstatus}),t(s,{children:e==null?void 0:e.staffname}),t(s,{children:e==null?void 0:e.allotmentdate}),t(s,{children:e==null?void 0:e.dischargedate}),i(H,{children:[i(U,{editFunction:`${C}/edit_bedAllotment?edit=${e==null?void 0:e._id}`,children:["Edit",t(Z,{})]}),i(w,{path:"bedallotment",id:e==null?void 0:e._id,record:g,children:["Delete",t(z,{})]})]})]},n)})]})]}),content2:t(V,{formName:"BED ALLOTMENT",children:i("form",{onSubmit:F,children:[i(x,{label:"Patient",name:"patientid",type:"number",onChange:o,children:[t("option",{value:"",children:"Select Patient"}),A.map((e,n)=>i("option",{value:e==null?void 0:e._id,children:[e==null?void 0:e.registrationId," - ",e==null?void 0:e.name]},n))]}),i(x,{label:"Patient Status",name:"patientstatus",type:"text",onChange:o,children:[t("option",{value:"",children:"Select Patient Status"}),t("option",{value:"Admitted",children:"Admitted"}),t("option",{value:"Under Treatment",children:"Under Treatment"}),t("option",{value:"Operated",children:"Operated"}),t("option",{value:"Recovery",children:"Recovery"}),t("option",{value:"Cured",children:"Cured"}),t("option",{value:"Discharged",children:"Discharged"}),t("option",{value:"Death",children:"Death"})]}),i(x,{label:"Bed Type",name:"bedtype",type:"text",onChange:o,children:[t("option",{value:"",children:"Select Bed type"}),O.map((e,n)=>t("option",{value:e==null?void 0:e.type,children:e==null?void 0:e.type},n))]}),t(m,{label:"Bed Number",name:"bednumber",type:"text",onChange:o}),t(m,{label:"Allotment Date",type:"datetime-local",name:"allotmentdate",onChange:o}),t(m,{label:"Discharge Date",type:"datetime-local",name:"dischargedate",onChange:o}),t("input",{type:"hidden",name:"staffname",onChange:o}),t(k,{children:E?t(ee,{}):"Add Bed Allotment"})]})})})}export{ye as B};
