import{u as S,r as s,i as B,b as p,a as o,j as n,f as c}from"./index.f58de973.js";import{A as E}from"./AccountantSidebar.254c17ef.js";import{B as L}from"./ButtonPreloader.94c40e61.js";import"./react-confirm-alert.a960cfb7.js";import{B as M}from"./Button.401e0b30.js";import{I as u}from"./Input.2b19439f.js";import{S as h}from"./Select.20c0844e.js";import{F as j}from"./FormLayout.d72bc2a5.js";import"./index.esm.9dc20768.js";import"./Forbidden.62eadd33.js";function _(){const m=S(),[y,g]=s.exports.useState([]),[v,C]=s.exports.useState([]),[b,x]=s.exports.useState(!1),[e,d]=s.exports.useState({patientid:"",purpose:"",modeofpayment:"",amount:"",date:""});function i(t){d(a=>({...a,[t.target.name]:t.target.value}))}let P=B().search;const r=new URLSearchParams(P).get("edit");return s.exports.useEffect(()=>{p.get("/patient").then(t=>{g(t.data)}),p.get(`/payments/?edit=${r}`).then(t=>{var a,l;d(t.data),C((l=(a=t.data)==null?void 0:a.patients[0])==null?void 0:l.name)})},[]),o(E,{children:[" ",n(j,{formName:"Edit Invoice",children:o("form",{onSubmit:t=>{t.preventDefault(),x(!0),p.put(`/payments/${r}`,{patientid:e==null?void 0:e.patientid,purpose:e==null?void 0:e.purpose,modeofpayment:e==null?void 0:e.modeofpayment,amount:e==null?void 0:e.amount,date:e==null?void 0:e.date}).then(a=>{m("/accountant/viewpayments",{replace:!0}),c.success(a.data)}).catch(a=>{c.error(a.response.data)})},children:[(e==null?void 0:e.purpose)!=="Medication/drugs"?o(h,{label:"Patient",name:"patientid",type:"number",onChange:i,children:[n("option",{value:e==null?void 0:e.patientid,children:v}),y.map((t,a)=>n("option",{value:t==null?void 0:t._id,children:t==null?void 0:t.name},a))]}):n("input",{type:"hidden",name:"patientid",value:e==null?void 0:e.patientid,onChange:i}),(e==null?void 0:e.purpose)!=="Medication/drugs"?n(u,{label:"Purpose of Payment",type:"text",name:"purpose",value:e==null?void 0:e.purpose,onChange:i}):n("input",{type:"hidden",name:"purpose",value:e==null?void 0:e.purpose,onChange:i}),o(h,{label:"Mode Of Payment",name:"modeofpayment",type:"text",onChange:i,children:[n("option",{value:e==null?void 0:e.modeofpayment,children:e==null?void 0:e.modeofpayment}),n("option",{value:"Cash",children:"Cash"}),n("option",{value:"Bank Transfer",children:"Bank Transfer"})]}),(e==null?void 0:e.purpose)!=="Medication/drugs"?n(u,{label:"Amount",type:"text",name:"amount",value:e==null?void 0:e.amount,onChange:i}):n("input",{type:"hidden",name:"amount",value:e==null?void 0:e.amount,onChange:i}),n(u,{label:"Date",type:"date",name:"date",value:e==null?void 0:e.date,onChange:i}),n(M,{children:b?n(L,{}):"Edit Payment"})]})})]})}export{_ as default};
