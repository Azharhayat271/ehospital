import{r as u,l as R,j as e,a,b as x,f as v}from"./index.f58de973.js";import{D as M}from"./DeleteButton.4f77d945.js";import{E as j}from"./EditButton.73344e14.js";import{B as w}from"./Button.401e0b30.js";import{I as c}from"./Input.2b19439f.js";import{S as L}from"./SearchInput.fbf5bece.js";import{S}from"./Select.20c0844e.js";import{h as G}from"./react-confirm-alert.a960cfb7.js";import{O as _,a as $}from"./OptionsTh.c75c39d4.js";import{T as Y,a as k,b as i,c as z,d as s}from"./Thead.153a86c7.js";import{F as H}from"./FormLayout.d72bc2a5.js";import{T as J}from"./Tabs.d7c11583.js";import{I as K}from"./IndexNo.9a14fcf3.js";import{T as Q}from"./TotalNo.b321ab04.js";import{R as U}from"./index.esm.9fff59ce.js";import{R as V}from"./ReactPagination.cf11bdc7.js";import{B as W}from"./ButtonPreloader.94c40e61.js";function fe({role:T}){u.exports.useContext(R);const[C,f]=u.exports.useState(!1),[l,b]=u.exports.useState({name:"",email:"",address:"",phone:"",sex:"",dob:"",age:"",bloodgroup:"",tor:""}),y=o=>{if(!o)return"";const r=new Date(o),t=new Date;let n=t.getFullYear()-r.getFullYear();const g=t.getMonth()-r.getMonth();return(g<0||g===0&&t.getDate()<r.getDate())&&n--,n};function d(o){const{name:r,value:t}=o.target;if(r==="dob"){const n=y(t);b(g=>({...g,dob:t,age:n}))}else b(n=>({...n,[r]:t}))}function p(){x.get("/patient").then(o=>{P(o.data)}).catch(o=>{v.error(o.data)})}const O=o=>{o.preventDefault(),f(!0);const r={...l,age:parseInt(l.age)};x.post("/patient",r).then(t=>{f(!1),p(),b({name:"",email:"",address:"",phone:"",sex:"",dob:"",age:"",bloodgroup:"",tor:""}),v.success(t.data)}).catch(t=>{var n;f(!1),v.error(((n=t.response)==null?void 0:n.data)||"An error occurred")})},[h,P]=u.exports.useState([]),[A,B]=u.exports.useState(1);u.exports.useEffect(()=>{p()},[]);const F=o=>{x.get(`/patient?q=${o}`).then(r=>{P(r.data),B(1)})},m=10,D=A*m,N=D-m,q=h.slice(N,D),I=Math.ceil(h.length/m),E=o=>{B(o.selected+1)};return e(J,{label1:"Patients",content1:a("div",{children:[a("div",{className:"flex justify-between items-center",children:[e(L,{onSearch:F}),a("div",{className:"items-center flex flex-col lg:flex-row",children:[e(Q,{totalnumber:h==null?void 0:h.length}),e(V,{pageCount:I,handlePageClick:E})]})]}),a(Y,{children:[a(k,{children:[e(K,{children:"#"}),e(i,{children:"Reg. Id"}),e(i,{children:"Name"}),e(i,{children:"Phone"}),e(i,{children:"Sex"}),e(i,{children:"Age"}),e(i,{children:"Blood Group"}),e(i,{children:"Time Of Registration"}),e(_,{children:"Options"})]}),q.map((o,r)=>a(z,{children:[e(s,{children:r+1*(A*m-9)}),e(s,{className:"font-bold",children:o==null?void 0:o.registrationId}),e(s,{children:o==null?void 0:o.name}),e(s,{children:o==null?void 0:o.phone}),e(s,{children:o==null?void 0:o.sex}),e(s,{children:o==null?void 0:o.age}),e(s,{children:o==null?void 0:o.bloodgroup}),e(s,{children:o==null?void 0:o.tor}),a($,{children:[a(j,{editFunction:`${T}/edit_patient?edit=${o==null?void 0:o._id}`,children:["Edit",e(U,{})]}),a(M,{path:"patient",id:o==null?void 0:o._id,record:p,children:["Delete",e(G,{})]})]})]},r))]})]}),label2:"Add Patient",content2:e(H,{formName:"ADD PATIENT",children:a("form",{onSubmit:O,children:[e(c,{label:"Name",type:"text",name:"name",value:l.name,onChange:d,required:!0}),e(c,{label:"Email",type:"email",name:"email",value:l.email,onChange:d,required:!0}),e(c,{label:"Address",type:"text",name:"address",value:l.address,onChange:d,required:!0}),e(c,{label:"Phone Number",type:"text",name:"phone",value:l.phone,onChange:d,required:!0}),a(S,{label:"Sex",name:"sex",value:l.sex,onChange:d,required:!0,children:[e("option",{value:"",children:"Select Sex"}),e("option",{value:"Male",children:"Male"}),e("option",{value:"Female",children:"Female"})]}),e(c,{label:"Date of Birth",type:"date",name:"dob",value:l.dob,onChange:d,required:!0}),e(c,{label:"Age",type:"number",name:"age",value:l.age,readOnly:!0}),a(S,{label:"Blood Group",name:"bloodgroup",value:l.bloodgroup,onChange:d,required:!0,children:[e("option",{value:"",children:"Select Blood Group"}),e("option",{value:"A+",children:"A+"}),e("option",{value:"A-",children:"A-"}),e("option",{value:"B+",children:"B+"}),e("option",{value:"B-",children:"B-"}),e("option",{value:"AB+",children:"AB+"}),e("option",{value:"AB-",children:"AB-"}),e("option",{value:"O+",children:"O+"}),e("option",{value:"O-",children:"O-"})]}),e(c,{label:"Time Of Registration",type:"datetime-local",name:"tor",value:l.tor,onChange:d,required:!0}),e(w,{children:C?e(W,{}):"Add Patient"})]})})})}export{fe as P};
